<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Zombie Battle</title>
<style>
body{margin:0;overflow:hidden;background:black}
canvas{display:block}

/* UI */
#ui{
 position:absolute;
 top:10px;
 width:100%;
 text-align:center;
 color:white;
 font-size:18px;
 z-index:10;
}

button{
 position:absolute;
 background:#00ff99;
 border:none;
 border-radius:10px;
 font-size:20px;
 width:55px;
 height:55px;
}

#up{left:70px;bottom:120px}
#down{left:70px;bottom:20px}
#left{left:10px;bottom:70px}
#right{left:130px;bottom:70px}

#fire{
 right:20px;
 bottom:80px;
 width:80px;
 height:80px;
 border-radius:50%;
 background:red;
 color:white;
 font-size:30px;
}

#gun{
 right:20px;
 bottom:170px;
 width:80px;
 height:50px;
 background:#ffaa00;
}
</style>
</head>

<body>

<div id="ui">
 Gun: <span id="gunName">Pistol</span> |
 Level: <span id="level">1</span> |
 Score: <span id="score">0</span>
</div>

<canvas id="game"></canvas>

<button id="up">‚Üë</button>
<button id="down">‚Üì</button>
<button id="left">‚Üê</button>
<button id="right">‚Üí</button>
<button id="fire">üî•</button>
<button id="gun">üî´</button>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

/* IMAGES */
const bg=new Image(); bg.src="images/bg.png";
const playerImg=new Image(); playerImg.src="images/player.png";
const zombieImg=new Image(); zombieImg.src="images/zombie.png";
const bossImg=new Image(); bossImg.src="images/boss.png";
const bulletImg=new Image(); bulletImg.src="images/bullet.png";

/* SOUNDS */
const bgMusic=new Audio("sounds/bg.mp3");
const fireSound=new Audio("sounds/fire.mp3");
const hitSound=new Audio("sounds/hit.mp3");
bgMusic.loop=true;

/* PLAYER */
let player={x:80,y:300,w:120,h:120};

/* GUNS */
const guns=[
 {name:"Pistol",speed:10,damage:1,spread:1},
 {name:"Rifle",speed:14,damage:1,spread:1},
 {name:"Shotgun",speed:9,damage:1,spread:3}
];
let gunIndex=0;

/* ZOMBIE */
let zombie={};
let score=0,level=1;
let bullets=[];

function spawnZombie(){
 zombie.x=canvas.width;
 zombie.y=Math.random()*(canvas.height-160);

 if(level%5===0){
  zombie.boss=true;
  zombie.w=180; zombie.h=180;
  zombie.speed=1.5;
  zombie.health=6;
 }else{
  zombie.boss=false;
  zombie.w=120; zombie.h=120;
  zombie.speed=2+level*0.3;
  zombie.health=1;
 }
}
spawnZombie();

/* CONTROLS */
up.onclick=()=>player.y-=20;
down.onclick=()=>player.y+=20;
left.onclick=()=>player.x-=20;
right.onclick=()=>player.x+=20;

fire.onclick=()=>{
 fireSound.play();
 let g=guns[gunIndex];

 for(let i=0;i<g.spread;i++){
  bullets.push({
   x:player.x+player.w,
   y:player.y+player.h/2+(i*10),
   speed:g.speed,
   damage:g.damage
  });
 }
};

gun.onclick=()=>{
 gunIndex=(gunIndex+1)%guns.length;
 document.getElementById("gunName").innerText=guns[gunIndex].name;
};

/* LOOP */
function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.drawImage(bg,0,0,canvas.width,canvas.height);
 ctx.drawImage(playerImg,player.x,player.y,player.w,player.h);

 zombie.x-=zombie.speed;
 ctx.drawImage(
  zombie.boss?bossImg:zombieImg,
  zombie.x,zombie.y,zombie.w,zombie.h
 );

 bullets.forEach((b,i)=>{
  b.x+=b.speed;
  ctx.drawImage(bulletImg,b.x,b.y,50,25);

  if(
   b.x>zombie.x &&
   b.x<zombie.x+zombie.w &&
   b.y>zombie.y &&
   b.y<zombie.y+zombie.h
  ){
   hitSound.play();
   bullets.splice(i,1);
   zombie.health-=b.damage;

   if(zombie.health<=0){
    score++;
    if(score%5===0) level++;
    document.getElementById("score").innerText=score;
    document.getElementById("level").innerText=level;
    spawnZombie();
   }
  }
 });

 requestAnimationFrame(loop);
}

document.body.onclick=()=>bgMusic.play();
loop();
</script>

</body>
</html>
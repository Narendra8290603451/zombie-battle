<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Zombie Battle</title>

<style>
html,body{margin:0;overflow:hidden;background:black;color:white;font-family:Arial}
.menu{
 position:fixed;top:0;left:0;width:100%;height:100%;
 display:flex;flex-direction:column;
 align-items:center;justify-content:center;
 background:black;z-index:10
}
button{
 padding:14px 30px;font-size:20px;
 margin:12px;border-radius:12px;border:none
}
canvas{display:none}

#joy{
 position:fixed;left:20px;bottom:30px;
 width:120px;height:120px;
 background:rgba(0,255,0,.3);
 border-radius:50%;display:none
}
#stick{
 width:50px;height:50px;background:#00ff88;
 border-radius:50%;position:absolute;left:35px;top:35px
}
#fire{
 position:fixed;right:30px;bottom:50px;
 width:90px;height:90px;border-radius:50%;
 font-size:30px;background:red;color:white;
 display:none
}
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="menu">
<h1>ðŸ§Ÿ Zombie Battle</h1>
<button onclick="startGame()">â–¶ Play</button>
<button onclick="alert('Settings coming soon')">âš™ Settings</button>
<button onclick="alert('Zombie Battle v1.0')">â„¹ About</button>
</div>

<canvas id="game"></canvas>
<div id="joy"><div id="stick"></div></div>
<button id="fire">ðŸ”¥</button>

<audio id="bgm" src="bg.mp3" loop></audio>
<audio id="fireS" src="fire.mp3"></audio>

<script>
const home=document.getElementById("home");
const cvs=document.getElementById("game");
const ctx=cvs.getContext("2d");
const joy=document.getElementById("joy");
const stick=document.getElementById("stick");
const fire=document.getElementById("fire");

cvs.width=innerWidth;
cvs.height=innerHeight;

const bg=new Image();bg.src="bg.png";
const playerImg=new Image();playerImg.src="player.png";
const zombieImg=new Image();zombieImg.src="zombie.png";
const bulletImg=new Image();bulletImg.src="bullet.png";

let cameraX=0;
let run=false;

const player={x:200,y:cvs.height-180,w:80,h:80};
let bullets=[];
let zombies=[];

function startGame(){
 home.style.display="none";
 cvs.style.display="block";
 joy.style.display="block";
 fire.style.display="block";
 document.getElementById("bgm").play();
 run=true;
 loop();
}

fire.onclick=()=>{
 bullets.push({x:cameraX+player.x+60,y:player.y+40});
 document.getElementById("fireS").play();
};

joy.ontouchmove=e=>{
 let r=joy.getBoundingClientRect();
 let x=e.touches[0].clientX-r.left-60;
 if(x>20) cameraX+=4;
};

setInterval(()=>{
 if(run){
 zombies.push({x:cameraX+cvs.width+200,y:cvs.height-170,w:70,h:70});
 }
},2000);

function loop(){
 if(!run)return;
 update();
 draw();
 requestAnimationFrame(loop);
}

function update(){
 bullets.forEach(b=>b.x+=8);
 zombies.forEach(z=>z.x-=2);
}

function draw(){
 ctx.clearRect(0,0,cvs.width,cvs.height);
 ctx.drawImage(bg,-cameraX%cvs.width,0,cvs.width,cvs.height);
 ctx.drawImage(bg,cvs.width-cameraX%cvs.width,0,cvs.width,cvs.height);
 ctx.drawImage(playerImg,player.x,player.y,player.w,player.h);
 zombies.forEach(z=>ctx.drawImage(zombieImg,z.x-cameraX,z.y,z.w,z.h));
 bullets.forEach(b=>ctx.drawImage(bulletImg,b.x-cameraX,b.y,20,20));
}
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zombie Battle</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#000;color:#fff;font-family:Arial;overflow:hidden;}

.screen{
  position:absolute;
  width:100%;
  height:100%;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

button{
  padding:12px 25px;
  margin:8px;
  font-size:18px;
  border:none;
  border-radius:6px;
  background:#e63946;
  color:#fff;
}

#home{display:flex;}
#levels button{width:200px;}

#gameCanvas{
  background:url(bg.png) repeat-x;
  background-size:cover;
}

#ui{
  position:absolute;
  top:10px;
  left:10px;
  width:90%;
  display:flex;
  justify-content:space-between;
}

.bar{
  width:150px;
  height:15px;
  border:2px solid #fff;
}
.bar div{
  height:100%;
  background:red;
}
</style>
</head>

<body>

<!-- HOME -->
<div id="home" class="screen">
  <h1>ðŸ§Ÿ Zombie Battle</h1>
  <button onclick="openLevels()">Play</button>
  <button onclick="alert('Gun switch: Pistol / Rifle')">Guns</button>
  <button onclick="alert('Sound On/Off')">Settings</button>
  <button onclick="alert('Made by You')">About</button>
</div>

<!-- LEVELS -->
<div id="levels" class="screen">
  <h2>Select Level</h2>
  <button onclick="startGame(1)">Level 1</button>
  <button onclick="startGame(2)">Level 2</button>
  <button onclick="startGame(3)">Level 3 (Boss)</button>
  <button onclick="goHome()">Back</button>
</div>

<!-- GAME -->
<div id="game" class="screen">
  <canvas id="gameCanvas"></canvas>

  <div id="ui">
    <div class="bar"><div id="playerHealth"></div></div>
    <div class="bar"><div id="bossHealth"></div></div>
  </div>
</div>

<script>
let canvas = document.getElementById("gameCanvas");
let ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let playerImg = new Image();
playerImg.src = "player.png";

let zombieImg = new Image();
zombieImg.src = "zombie.png";

let bossImg = new Image();
bossImg.src = "boss.png";

let bulletImg = new Image();
bulletImg.src = "bullet.png";

let bgMusic = new Audio("bg.mp3");
bgMusic.loop = true;
let fireSound = new Audio("fire.mp3");
let hitSound = new Audio("hit.mp3");

let player, zombies, bullets, level, boss;

function goHome(){
  show("home");
}
function openLevels(){
  show("levels");
}
function startGame(lv){
  level = lv;
  show("game");
  initGame();
}

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="flex";
}

function initGame(){
  bgMusic.play();

  player = {x:100,y:canvas.height/2,w:80,h:100,health:100};
  zombies = [];
  bullets = [];
  boss = null;

  let count = level*3;
  for(let i=0;i<count;i++){
    zombies.push({
      x:canvas.width+Math.random()*800,
      y:Math.random()*(canvas.height-150),
      w:80,h:100,
      health:40+level*20
    });
  }

  if(level===3){
    boss = {x:canvas.width+500,y:200,w:150,h:180,health:300};
  }

  loop();
}

window.addEventListener("touchstart",shoot);
window.addEventListener("click",shoot);

function shoot(){
  bullets.push({
    x:player.x+70,
    y:player.y+40,
    w:40,h:20
  });
  fireSound.play();
}

window.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp")player.y-=30;
  if(e.key==="ArrowDown")player.y+=30;
});

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // player
  ctx.drawImage(playerImg,player.x,player.y,player.w,player.h);

  // bullets
  bullets.forEach(b=>{
    b.x+=15;
    ctx.drawImage(bulletImg,b.x,b.y,b.w,b.h);
  });

  // zombies
  zombies.forEach(z=>{
    z.x-=2+level;
    ctx.drawImage(zombieImg,z.x,z.y,z.w,z.h);

    bullets.forEach(b=>{
      if(hit(b,z)){
        z.health-=20;
        hitSound.play();
        b.x=9999;
      }
    });
  });

  zombies = zombies.filter(z=>z.health>0);

  // boss
  if(boss){
    boss.x-=1;
    ctx.drawImage(bossImg,boss.x,boss.y,boss.w,boss.h);

    bullets.forEach(b=>{
      if(hit(b,boss)){
        boss.health-=10;
        hitSound.play();
        b.x=9999;
      }
    });
  }

  // health bars
  document.getElementById("playerHealth").style.width=player.health+"%";
  if(boss){
    document.getElementById("bossHealth").style.width=(boss.health/3)+"%";
  }

  requestAnimationFrame(loop);
}

function hit(a,b){
  return a.x<b.x+b.w &&
         a.x+a.w>b.x &&
         a.y<b.y+b.h &&
         a.y+a.h>b.y;
}

show("home");
</script>
</body>
</html>